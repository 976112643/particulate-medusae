THREE.ShaderChunk.lerp_pos_pars_vertex=["uniform float time;","attribute vec3 positionPrev;"].join("\n"),THREE.ShaderChunk.lerp_pos_vertex=["vec4 mvPosition = modelViewMatrix *","vec4(mix(positionPrev, position, time), 1.0);","gl_Position = projectionMatrix * mvPosition;"].join("\n"),this.App=this.App||{},this.App.shaders=this.App.shaders||{},this.App.shaders["basic-vert"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return f=b&&b.chunks,f=null==f||f===!1?f:f.map_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.morphtarget_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.skinning_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.map_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.skinbase_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  #ifdef USE_ENVMAP\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.morphnormal_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.skinnormal_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.defaultnormal_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  #endif\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.morphtarget_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.skinning_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.default_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.worldpos_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["bulb-frag"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform vec3 diffuse;\nuniform float opacity;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.map_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.alphamap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.specularmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nfloat scale = 20.0;\nfloat color = 2.0;\nfloat r = 1.6;\nfloat g = 1.0;\nfloat b = 1.2;\n\nvoid main() {\n  gl_FragColor = vec4(diffuse, opacity);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.map_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.alphamap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.alphatest_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.specularmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  vec2 uv = vUv;\n\n  color -= sin(uv.x * 60.0) * 0.25 + sin(uv.x * 60.0 * scale) * 0.25 + 0.75;\n\n  color -= sin(uv.y * sin(uv.x         * 5.0) * 5.0 * scale) * 0.05;\n  color -= sin(uv.y * sin((1.0 - uv.x) * 5.0) * 5.0 * scale) * 0.05;\n\n  color -= sin(uv.y * sin(uv.y + cos(uv.x)       * 2.0) * 10.0 * scale) * 0.15;\n  color -= sin(uv.y * sin(uv.y + cos(1.0 - uv.x) * 2.0) * 10.0 * scale) * 0.15;\n\n  color -= sin((uv.y - 1.5) * sin(uv.y + cos(uv.x - 1.0)       * 2.0) * 8.0 * scale) * 0.15;\n  color -= sin((uv.y - 1.5) * sin(uv.y + cos(1.0 - uv.x - 1.0) * 2.0) * 8.0 * scale) * 0.15;\n\n  color -= sin(uv.y * 5.0) * 0.5 + sin(uv.y * 2.5) * 1.5;\n\n  gl_FragColor = vec4(vec3(color * r, color * g, color * b), opacity);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.linear_to_gamma_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["dust-frag"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform vec3 psColor;\nuniform float opacity;\nuniform float area;\n\nvarying float centerDist;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.map_particle_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  float illumination = (area * 2.0 / (centerDist * centerDist));\n  gl_FragColor = vec4(psColor, illumination);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.map_particle_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.alphatest_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["dust-vert"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform float size;\nuniform float scale;\nuniform float time;\nuniform float area;\n\nvarying float centerDist;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  float offsetY = mod(position.y - 1.0 * time, area) - area * 0.5;\n  vec3 offsetPosition = vec3(\n    position.x + sin(cos(offsetY * 0.1) + sin(offsetY * 0.1 + position.x * 0.1) * 2.0),\n    offsetY,\n    position.z + sin(cos(offsetY * 0.1) + sin(offsetY * 0.1 + position.z * 0.1) * 2.0));\n\n  centerDist = length(offsetPosition);\n\n  vec4 mvPosition = modelViewMatrix * vec4(offsetPosition, 1.0);\n\n  gl_PointSize = size * (scale / length(mvPosition.xyz));\n  gl_Position = projectionMatrix * mvPosition;\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.worldpos_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["lerp-vert"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return f=b&&b.chunks,f=null==f||f===!1?f:f.lerp_pos_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.map_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.morphtarget_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.skinning_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.map_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.skinbase_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  #ifdef USE_ENVMAP\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.morphnormal_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.skinnormal_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.defaultnormal_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  #endif\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.morphtarget_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.skinning_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.lerp_pos_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.worldpos_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["tail-frag"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform vec3 diffuse;\nuniform float opacity;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.map_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.alphamap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.specularmap_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  gl_FragColor = vec4(diffuse, opacity);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.map_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.alphamap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.alphatest_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.specularmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.lightmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  vec2 uv = vUv;\n  float color = (sin(uv.y * 1000.0) - sin((1.0 - uv.x) * 3.0 + 1.2)) * uv.y;\n  color = smoothstep(-0.65, 1.0, color);\n\n  gl_FragColor = vec4(vec3(color) * diffuse, color * opacity);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.envmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.shadowmap_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.linear_to_gamma_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["tentacle-frag"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform vec3 diffuse;\nuniform float opacity;\nuniform float area;\n\nvarying float centerDist;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  float illumination = (area * 2.0 / (centerDist * centerDist));\n  gl_FragColor = vec4(\n    mix(vec3(1.0), diffuse, illumination),\n    opacity * illumination);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.alphatest_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.fog_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["tentacle-vert"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform float area;\nvarying float centerDist;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.lerp_pos_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.color_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_pars_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.color_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  centerDist = length(position);\n\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.lerp_pos_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.logdepthbuf_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.worldpos_vertex,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n}\n"}),this.App.shaders["uvs-frag"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+="uniform float opacity;\n\n",f=b&&b.chunks,f=null==f||f===!1?f:f.map_pars_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\nvoid main() {\n  ",f=b&&b.chunks,f=null==f||f===!1?f:f.map_fragment,f=typeof f===h?f.apply(b):f,(f||0===f)&&(g+=f),g+="\n\n  gl_FragColor = vec4(vUv.xy, 0.0, opacity);\n}\n"}),function(){var a=Object.create({log:window.console&&window.console.log.bind(window.console)||function(){},ctor:Particulate.ctor});a.shaders=window.App&&window.App.shaders,a.log("Particulate.js "+Particulate.VERSION),window.App=a}(),function(){var a=App.Faces={};a.quad=function(a,b,c,d,e){return e.push(a,b,c),e.push(c,d,a),e},a.radial=function(a,b,c,d){for(var e=0,f=c-1;f>e;e++)d.push(a,b+e+1,b+e);return d.push(a,b,b+c-1),d},a.rings=function(a,b,c,d){for(var e,f,g,h,i=0,j=c-1;j>i;i++)e=a+i,f=a+i+1,g=b+i+1,h=b+i,d.push(e,f,g),d.push(g,h,e);return e=a+c-1,f=a,g=b,h=b+c-1,d.push(e,f,g),d.push(g,h,e),d}}(),function(){var a=App.Geometry={};a.point=function(a,b,c,d){return d.push(a,b,c),d},a.circle=function(a,b,c,d){for(var e=2*Math.PI/a,f=0,g=0;a>g;g++)d.push(Math.cos(f)*b,c,Math.sin(f)*b),f+=e;return d}}(),function(){var a=App.Links={};a.line=function(a,b,c){for(var d=0;b-1>d;d++)c.push(a+d,a+d+1);return c},a.loop=function(a,b,c){for(var d=0;b-1>d;d++)c.push(a+d,a+d+1);return c.push(a,a+b-1),c},a.rings=function(a,b,c,d){for(var e=0;c>e;e++)d.push(a+e,b+e);return d},a.ringsAsym=function(a,b,c,d,e){for(var f=0;d>f;f++)e.push(a+f,b+f*c);return e},a.radial=function(a,b,c,d){for(var e=0;c>e;e++)d.push(a,b+e);return d},a.radial2=function(a,b,c,d){for(var e=0;c-1>e;e++)d.push(b+e,a,b+e+1);return d.push(b+c-1,a,b),d},a.radial2(0,1,3,[]),a.loop3=function(a,b,c){for(var d=0;b-2>d;d++)c.push(a+d,a+d+1,a+d+2);return c.push(a+b-2,a+b-1,a),c.push(a+b-1,a,a+1),c}}(),function(){function a(a,b,c,d){function e(b){j+=b;var c=Math.floor(j/k);for(c>0&&(j-=c*k);c>0;)h.call(a,k),c--;var d=j/k;i.call(a,k,d)}function f(){if(l){var a=Date.now(),b=a-g;e(b),requestAnimationFrame(f),g=a}}var g,h=a[b],i=a[c],j=0,k=d||1/30*1e3,l=!1;this.stop=function(){l=!1},this.start=function(){g=Date.now(),l=!0,f()},this.toggle=function(){l?this.stop():this.start()}}App.Looper=a,a.create=App.ctor(a)}(),function(){function a(a){var b=App.shaders[a];return b({chunks:THREE.ShaderChunk})}function b(b){this.shader&&(this.uniforms=THREE.UniformsUtils.clone(this.shader.uniforms),this.attributes=THREE.UniformsUtils.clone(this.shader.attributes),this.setUniformParameters(b),THREE.ShaderMaterial.call(this,{uniforms:this.uniforms,attributes:this.attributes,fragmentShader:a(this.shader.fragmentShader),vertexShader:a(this.shader.vertexShader)}),this.transparent=b.transparent||!1,this.blending=b.blending||THREE.NormalBlending,this.side=b.side||THREE.FrontSide,this.linewidth=b.linewidth||1,this.fog=!!b.fog,this.map=!!b.map,this.bumpMap=!!b.bumpMap,this.normalMap=!!b.normalMap,this.specularMap=!!b.specularMap)}App.ShaderMaterial=b,b.prototype=Object.create(THREE.ShaderMaterial.prototype),b.prototype.setUniformParameters=function(a){var b=this.uniforms;Object.keys(a).forEach(function(c){var d=b[c];if(d)switch(d.type){case"c":this[c]=b[c].value=new THREE.Color(a[c]);break;default:this[c]=b[c].value=a[c]}}.bind(this))}}(),function(){function a(a){a=a||{},a.map=!0,b.call(this,a)}var b=App.ShaderMaterial,c=THREE.UniformsLib;App.BulbMaterial=a,a.prototype=Object.create(b.prototype),a.prototype.shader={vertexShader:"lerp-vert",fragmentShader:"bulb-frag",uniforms:THREE.UniformsUtils.merge([c.common,{time:{type:"f",value:0}}]),attributes:{positionPrev:{type:"v3",value:null}}}}(),function(){function a(a){a=a||{},b.call(this,a)}var b=App.ShaderMaterial,c=THREE.UniformsLib;App.DustMaterial=a,a.prototype=Object.create(b.prototype),a.prototype.shader={vertexShader:"dust-vert",fragmentShader:"dust-frag",uniforms:THREE.UniformsUtils.merge([c.particle,{time:{type:"f",value:0},area:{type:"f",value:1}}])}}(),function(){function a(a){a=a||{},a.map=!0,b.call(this,a)}var b=App.ShaderMaterial,c=THREE.UniformsLib;App.TailMaterial=a,a.prototype=Object.create(b.prototype),a.prototype.shader={vertexShader:"lerp-vert",fragmentShader:"tail-frag",uniforms:THREE.UniformsUtils.merge([c.common,{time:{type:"f",value:0}}]),attributes:{positionPrev:{type:"v3",value:null}}}}(),function(){function a(a){a=a||{},b.call(this,a)}var b=App.ShaderMaterial,c=THREE.UniformsLib;App.TentacleMaterial=a,a.prototype=Object.create(b.prototype),a.prototype.shader={vertexShader:"tentacle-vert",fragmentShader:"tentacle-frag",uniforms:THREE.UniformsUtils.merge([c.common,{time:{type:"f",value:0},area:{type:"f",value:1}}]),attributes:{positionPrev:{type:"v3",value:null}}}}(),function(){function a(a){a=a||{},a.map=!0,b.call(this,a)}var b=App.ShaderMaterial,c=THREE.UniformsLib;App.UVMaterial=a,a.prototype=Object.create(b.prototype),a.prototype.shader={vertexShader:"basic-vert",fragmentShader:"uvs-frag",uniforms:THREE.UniformsUtils.merge([c.common])}}(),function(){function a(a){this.pxRatio=a.pxRatio||1,this.particleSize=2*this.pxRatio,this.particleCount=1e4,this.area=100,this.createParticles(),this.createMaterials(),this.createItem()}App.Dust=a,a.create=App.ctor(a),a.prototype.createParticles=function(){for(var a,b=this.particleCount,c=this.geometry=new THREE.BufferGeometry,d=new Float32Array(3*b),e=this.area,f=.5*e,g=0,h=d.length/3;h>g;g++)a=3*g,d[a]=Math.random()*e-f,d[a+1]=Math.random()*e-f,d[a+2]=Math.random()*e-f;var i=new THREE.BufferAttribute;i.array=d,i.itemSize=3,c.addAttribute("position",i)},a.prototype.createMaterials=function(){var a=this.material=new App.DustMaterial({psColor:16777215,size:this.particleSize,scale:100,area:this.area,transparent:!0});this.timeAttr=a.uniforms.time},a.prototype.createItem=function(){this.item=new THREE.PointCloud(this.geometry,this.material)},a.prototype.addTo=function(a){a.add(this.item)},a.prototype.updateGraphics=function(a){this.timeAttr.value+=.005*a}}(),function(){function a(a){this.pxRatio=a.pxRatio||1,this.lineWidth=this.pxRatio,this.animTime=0,this.segmentsCount=4,this.ribsCount=20,this.size=20,this._totalSegments=3*this.segmentsCount*3,this.tentacleGroupCount=4,this.tentacleGroupOffset=1,this.tentacleSegments=140,this.tentacleSegmentLength=1,this.tentacleWeightFactor=.5,this.tailCount=10,this.tailSegments=50,this.tailSegmentSize=1,this.tailRadius=9,this.ribs=[],this.item=new THREE.Object3D,this.createTempBuffers(),this.createGeometry(),this.createSystem(),this.createMaterials(),this.removeTempBuffers()}function b(a,b,c,d){for(var e=[],f=0;d>f;f++)e.push(a,b,c+f);return e}function c(a){return p(t-.55*t*a*1.8)+r(100*a+2)/3}function d(a,b,c,d){for(var e,f,g=s(c/3),h=0;3>h;h++)e=a+g*h,f=a+g*(h+1),d.push(b+e%c,b+f%c);return d}function e(a,b,c){for(var d,e,f=1,g=b;g>f;f++)d=(f+1)/(b-1),e=2*(.5>=d?d:1-d),c.push(e,a);return c.push(0,a),c}function f(a,b){for(var c=0,d=a;d>c;c++)b.push(0,0);return b}var g=Particulate,h=App.Geometry,i=App.Links,j=App.Faces,k=g.Vec3,l=g.PointConstraint,m=g.DistanceConstraint,n=g.AngleConstraint,o=g.AxisConstraint,p=Math.sin,q=Math.cos,r=Math.log,s=Math.floor,t=Math.PI,u=Array.prototype.push;App.Medusae=a,a.create=App.ctor(a),a.tempBuffers=["queuedConstraints","verts","links","weights","bulbFaces","tailFaces","uvs","tentacles","tentacleIndices","skins"],a.prototype.createTempBuffers=function(){for(var b,c=a.tempBuffers,d=c.length-1;d>=0;d--)b=c[d],this[b]=[]},a.prototype.removeTempBuffers=function(){for(var b,c=a.tempBuffers,d=c.length-1;d>=0;d--)b=c[d],delete this[b]},a.prototype.createGeometry=function(){this.createCore(),this.createBulb(),this.createTentacles(),this.createTail()},a.prototype.createCore=function(){var a=this.verts,c=this.uvs,d=this._totalSegments,e=this.ribsCount,f=this.size,g=this.topStart=4;h.point(0,f,0,a),c.push(0,0);for(var i=0,k=g-1;k>i;i++)h.point(0,0,0,a),c.push(0,0);var l=m.create([20,f],[0,2]),p=o.create(0,1,2),q=d*(e-1)+g,r=n.create([.35*t,.65*t],b(1,0,g,d)),s=n.create([.45*t,.65*t],b(0,2,q,d));this.queueConstraints(l,p),this.queueConstraints(r,s),j.radial(0,g,d,this.bulbFaces)},a.prototype.createBulb=function(){for(var a=this.ribsCount,b=0,c=a;c>b;b++)this.createRib(b,a),b>0&&this.createSkin(b-1,b)},a.prototype.createInnerRib=function(a,b){for(var c=this.segmentsCount,e=this._totalSegments,f=[],g=0,h=c;h>g;g++)d(3*g,a,e,f);return m.create([.8*b,b],f)},a.prototype.createRib=function(a,b){var d=this._totalSegments,f=this.verts,g=this.uvs,j=this.size,k=a/b,l=j-k*j,n=a*d+this.topStart,o=c(k),p=10*o+.5;h.circle(d,p,l,f),e(k,d,g);var q,r,s=i.loop(n,d,[]),u=2*t*p/d,v=m.create([.9*u,u],s),w=2*t*p/3,x=this.createInnerRib(n,w);(0===a||a===b-1)&&(r=0===a?0:2,q=m.create([.8*p,p],i.radial(r,n,d,[])),this.queueConstraints(q),0===a&&this.addLinks(q.indices)),this.queueConstraints(v,x),this.ribs.push({start:n,radius:p,yParam:k,outer:v,inner:x,spine:q})},a.prototype.createSkin=function(a,b){var c=this._totalSegments,d=this.ribs[a],e=this.ribs[b],f=k.distance(this.verts,d.start,e.start),g=m.create([.5*f,f],i.rings(d.start,e.start,c,[]));this.queueConstraints(g),this.addLinks(g.indices),j.rings(d.start,e.start,c,this.bulbFaces),this.skins.push({a:a,b:b})},a.prototype.updateBulb=function(){for(var a,b,c,d,e=this.animTime,f=.5*(p(e)+1),g=15,h=this._totalSegments,i=this.ribs,j=0,k=i.length;k>j;j++)a=i[j],b=a.radius+a.yParam*f*g,c=2*t*b/h,d=2*t*b/3,a.outer.setDistance(.9*c,c),a.inner.setDistance(.8*d,d),a.spine&&a.spine.setDistance(.8*b,b)},a.prototype.createTentacles=function(){for(var a=this.tentacleGroupCount,b=0,c=a;c>b;b++)this.createTentacleGroup(b)},a.prototype.createTentacleGroup=function(a){for(var b=this.tentacleSegments,c=0,d=b;d>c;c++)this.createTentacleSegment(a,c,b),c>0?this.linkTentacle(a,c-1,c):this.attachTentacles(a)},a.prototype.createTentacleSegment=function(a,b,c){var d=this._totalSegments,e=this.verts,g=this.uvs,i=20*(.25*p(.1*b)+.5),j=-b*this.tentacleSegmentLength,k=e.length/3;h.circle(d,i,j,e),f(d,g),this.queueWeights(k,d,b/c*this.tentacleWeightFactor),0===b&&this.tentacles.push([]),this.tentacles[a].push({start:k})},a.prototype.attachTentacles=function(a){var b=this._totalSegments,c=a*this.tentacleGroupOffset,d=this.ribs[this.ribs.length-c-1],e=this.tentacles[a][0],f=this.tentacleSegmentLength,g=m.create([.5*f,f],i.rings(d.start,e.start,b,[]));this.queueConstraints(g),this.addLinks(g.indices,this.tentacleIndices)},a.prototype.linkTentacle=function(a,b,c){var d=this._totalSegments,e=this.tentacles[a],f=e[b],g=e[c],h=this.tentacleSegmentLength,j=m.create([.5*h,h],i.rings(f.start,g.start,d,[]));this.queueConstraints(j),this.addLinks(j.indices,this.tentacleIndices)},a.prototype.createTail=function(){for(var a=this.tailCount,b=0,c=a;c>b;b++)this.createTailSection(b,a)},a.prototype.createTailSection=function(a,b){for(var c,d,e,f,g,k,l=this.size,n=this.tailSegments,r=this.tailSegmentSize,s=1.8*r,u=this.tailRadius,v=20,w=l,x=this.verts,y=this.uvs,z=x.length/3,A=z+n-1,B=z+n,C=i.line(z,n,[0,z]),D=i.line(B,n,[]),E=[],F=[],G=[],H=2*Math.PI*a/b,I=0;n>I;I++)h.point(0,w-I*r,0,x),y.push(0,I/(n-1));for(I=0;n>I;I++)f=z+I,g=B+I,k=p(I/(n-1)*t*.8)*u,c=q(H)*k,e=p(H)*k,d=w-I*s,h.point(c,d,e,x),y.push(1,I/(n-1)),F.push(f,g),E.push(m.create(k,f,g)),I>10&&G.push(f-10,g),I>1&&j.quad(f-1,g-1,g,f,this.tailFaces);var J=m.create([.25*r,r],C),K=m.create([.25*s,s],D),L=m.create([.5*k,1/0],G),M=o.create(0,1,C),N=m.create([0,v],A,3);this.queueConstraints(J,K,L,M,N),this.queueConstraints(E),this.addLinks(D)},a.prototype.queueConstraints=function(a){u.apply(this.queuedConstraints,a.length?a:arguments)},a.prototype.queueWeights=function(a,b,c){var d,e,f=this.weights,g=a+b;if(f.length-1<g)for(d=0,e=g-f.length;e>d;d++)f.push(1);for(d=a,e=g;e>d;d++)f[d]=c},a.prototype.createSystem=function(){for(var a=this.queuedConstraints,b=this.weights,c=this.system=g.ParticleSystem.create(this.verts,2),d=0,e=a.length;e>d;d++)c.addConstraint(a[d]);for(d=0,e=b.length;e>d;d++)c.weights[d]=b[d];c.setWeight(0,0),c.setWeight(1,0),c.setWeight(3,0),c.addPinConstraint(l.create([0,this.size,0],0)),c.addPinConstraint(l.create([0,0,0],1)),c.addPinConstraint(l.create([0,-40,0],3))},a.prototype.relax=function(a){for(var b=this.system,c=0;a>c;c++)b.tick(1)},a.prototype.addLinks=function(a,b){b=b||this.links,u.apply(b,a)},a.prototype.addFaces=function(a){u.apply(this.bulbFaces,a)},a.prototype.createMaterials=function(){var a=new THREE.BufferAttribute(this.system.positions,3),b=new THREE.BufferAttribute(this.system.positionsPrev,3),c=new THREE.BufferAttribute(new Float32Array(this.uvs),2),d=new THREE.BufferAttribute(new Uint16Array(this.links),1),e=new THREE.BufferGeometry;e.addAttribute("position",a),e.addAttribute("positionPrev",b),e.addAttribute("index",d),this.linesFaint=new THREE.Line(e,new App.TentacleMaterial({color:16777215,opacity:.1,linewidth:this.lineWidth,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1}),THREE.LinePieces),this.linesFore=new THREE.Line(e,new App.TentacleMaterial({diffuse:16359101,area:200,opacity:.3,linewidth:this.lineWidth,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!0}),THREE.LinePieces),this.linesFaint.scale.multiplyScalar(1.1),this.linesFore.scale.multiplyScalar(1.1);var f=new THREE.BufferGeometry,g=new THREE.BufferAttribute(new Uint16Array(this.tentacleIndices),1);f.addAttribute("position",a),f.addAttribute("positionPrev",b),f.addAttribute("index",g),this.tentacleFore=new THREE.Line(f,new App.TentacleMaterial({diffuse:16359101,area:200,linewidth:this.lineWidth,transparent:!0,blending:THREE.AdditiveBlending,opacity:.5,depthTest:!0}),THREE.LinePieces),this.tentacleFore.scale.multiplyScalar(.8);var h=new THREE.BufferGeometry,i=new THREE.BufferAttribute(new Uint16Array(this.bulbFaces),1);h.addAttribute("position",a),h.addAttribute("positionPrev",b),h.addAttribute("index",i),h.addAttribute("uv",c),h.computeVertexNormals(),this.skinMesh=new THREE.Mesh(h,new App.BulbMaterial({diffuse:4266385}));var j=new THREE.BufferGeometry,k=new THREE.BufferAttribute(new Uint16Array(this.tailFaces),1);j.addAttribute("position",a),j.addAttribute("positionPrev",b),j.addAttribute("index",k),j.addAttribute("uv",c),this.tailMesh=new THREE.Mesh(j,new App.TailMaterial({diffuse:16777215,transparent:!0,blending:THREE.AdditiveBlending,opacity:.5,side:THREE.DoubleSide})),this.tailMesh.scale.multiplyScalar(1.1);var l=this.item;l.add(this.linesFaint),l.add(this.linesFore),l.add(this.tentacleFore),l.add(this.skinMesh),l.add(this.tailMesh),this.positionAttr=f.attributes.position,this.positionPrevAttr=f.attributes.positionPrev,this.timeAttrs=[this.linesFaint.material.uniforms.time,this.linesFore.material.uniforms.time,this.tentacleFore.material.uniforms.time,this.skinMesh.material.uniforms.time,this.tailMesh.material.uniforms.time]},a.prototype.addTo=function(a){a.add(this.item)},a.prototype.update=function(a){this.animTime+=.001*a,this.updateBulb(a),this.system.tick(.001*a),this.positionAttr.needsUpdate=!0,this.positionPrevAttr.needsUpdate=!0
},a.prototype.updateGraphics=function(a,b){for(var c=this.timeAttrs,d=0;d<c.length;d++)c[d].value=b}}(),function(){function a(){var a=this.scene=new THREE.Scene,b=this.camera=new THREE.PerspectiveCamera(30,1,5,3500);this.el=document.getElementById("container"),this.pxRatio=window.devicePixelRatio,this.gravity=-.9,this.initRenderer(),this.initFxComposer(),this.addPostFx(),this.onWindowResize(),this.initControls(),this.initItems(),b.position.set(200,100,0),b.lookAt(a.position),this.loop=App.Looper.create(this,"update","render",1/30*1e3),document.addEventListener("keyup",this.onDocumentKey.bind(this),!1),window.addEventListener("resize",this.onWindowResize.bind(this),!1)}var b=!0,c=!1;App.MainScene=a,a.create=App.ctor(a),a.prototype.initRenderer=function(){var a=this.renderer=new THREE.WebGLRenderer({devicePixelRatio:this.pxRatio,antialias:!1});a.setClearColor(1118481,1),a.autoClear=!1,this.el.appendChild(a.domElement)},a.prototype.initFxComposer=function(){var a=new THREE.WebGLRenderTarget(this.width,this.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearMipMapLinearFilter,format:THREE.RGBAFormat});this.composer=new THREE.EffectComposer(this.renderer,a),this._passIndex={}},a.prototype.addPostFx=function(){this.addPass(new THREE.RenderPass(this.scene,this.camera)),this.addPass(new THREE.BloomPass(.8,25,4,256)),this.addPass(new THREE.ShaderPass(THREE.CopyShader),!0)},a.prototype.addPass=function(a,b,c){return"string"==typeof a?this._passIndex[a]=b:(c=b,b=a),b.renderToScreen=c||!1,this.composer.addPass(b),b},a.prototype.getPass=function(a){return this._passIndex[a]},a.prototype.enablePass=function(a){var b=this.getPass(a);b&&(b.enabled=!0)},a.prototype.disablePass=function(a){var b=this.getPass(a);b&&(b.enabled=!1)},a.prototype.initItems=function(){var a=this.medusae=App.Medusae.create({pxRatio:this.pxRatio}),b=this.dust=App.Dust.create({pxRatio:this.pxRatio}),c=this.gravityForce=Particulate.DirectionalForce.create();a.system.addForce(c),a.relax(100),a.addTo(this.scene),b.addTo(this.scene)},a.prototype.initControls=function(){var a=new THREE.TrackballControls(this.camera,this.el);a.rotateSpeed=.75,a.zoomSpeed=.75,a.panSpeed=.6,a.noZoom=!b,a.noPan=!c,a.staticMoving=!1,a.dynamicDampingFactor=.2,a.keys=[65,17,16],this.controls=a,this.controlsUp=a.object.up},a.prototype.onWindowResize=function(){var a=window.innerWidth,b=window.innerHeight,c=this.pxRatio,d=a*c,e=b*c;this.width=a,this.height=b,this.camera.aspect=a/b,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,b),this.composer.setSize(d,e)},a.prototype.onDocumentKey=function(a){switch(a.which){case 32:this.loop.toggle(),a.preventDefault()}},a.prototype.update=function(a){var b=this.controlsUp,c=this.gravity;this.gravityForce.set(b.x*c,b.y*c,b.z*c),this.medusae.update(a)},a.prototype.render=function(a,b){this.controls.update(),this.medusae.updateGraphics(a,b),this.dust.updateGraphics(a,b),this.composer.render(.01)}}(),function(){function a(a){var b=a.name,c=document.getElementById("cover-"+b),d=this.toggle=document.getElementById("toggle-"+b),e=this.modal=document.getElementById(b);this.isActive=!1,this._toggleClassName=d.className,this._modalClassName=e.className,d.addEventListener("click",this.toggleState.bind(this),!1),c.addEventListener("click",this.toggleState.bind(this),!1)}App.ModalController=a,a.create=App.ctor(a),a.prototype.toggleState=function(){this.isActive?(this.modal.className=this._modalClassName,this.toggle.className=this._toggleClassName,this.isActive=!1):(this.modal.className+=" active",this.toggle.className+=" active",this.isActive=!0)}}(),function(){App.ModalController.create({name:"info"}),setTimeout(function(){var a=App.MainScene.create();a.loop.start()},0)}();